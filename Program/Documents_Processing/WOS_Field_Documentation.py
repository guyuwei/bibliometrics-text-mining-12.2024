"""
WOSå­—æ®µæ–‡æ¡£é¡µé¢
æä¾›Web of Scienceå­—æ®µçš„è¯¦ç»†è¯´æ˜å’Œå¸®åŠ©ä¿¡æ¯
"""

import streamlit as st
import pandas as pd
from typing import Dict, List

def display_wos_field_documentation():
    """æ˜¾ç¤ºWOSå­—æ®µæ–‡æ¡£é¡µé¢"""
    
    st.title("ğŸ“š Web of Science å­—æ®µæ–‡æ¡£")
    st.markdown("---")
    
    # å­—æ®µåˆ†ç±»
    field_categories = {
        "åŸºæœ¬æ ‡è¯†å­—æ®µ": {
            "FN": "æ–‡ä»¶å - Web of Scienceå¯¼å‡ºæ–‡ä»¶çš„æ ‡è¯†",
            "VR": "ç‰ˆæœ¬å· - å¯¼å‡ºæ–‡ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯", 
            "PT": "å‡ºç‰ˆç‰©ç±»å‹ - J=æœŸåˆŠæ–‡ç« , B=ä¹¦ç±, S=ä¸›ä¹¦, P=ä¸“åˆ©ç­‰",
            "UT": "å…¥è—å· - Web of Scienceå”¯ä¸€æ ‡è¯†ç¬¦",
            "AR": "æ–‡ç« ç¼–å· - æ–‡ç« çš„å”¯ä¸€ç¼–å·"
        },
        "ä½œè€…ç›¸å…³å­—æ®µ": {
            "AU": "ä½œè€… - æ–‡ç« ä½œè€…åˆ—è¡¨",
            "AF": "ä½œè€…å…¨å - ä½œè€…å®Œæ•´å§“å",
            "BA": "ä¹¦ç±ä½œè€… - ä¹¦ç±çš„ä½œè€…",
            "BF": "ä¹¦ç±ä½œè€…å…¨å - ä¹¦ç±ä½œè€…çš„å®Œæ•´å§“å",
            "CA": "å›¢ä½“ä½œè€… - æœºæ„æˆ–ç»„ç»‡ä½œä¸ºä½œè€…",
            "GP": "ä¹¦ç±å›¢ä½“ä½œè€… - ä¹¦ç±çš„å›¢ä½“ä½œè€…",
            "RI": "ResearcherIDå· - ç ”ç©¶è€…çš„å”¯ä¸€æ ‡è¯†",
            "OR": "ORCIDå· - å¼€æ”¾ç ”ç©¶è€…èº«ä»½æ ‡è¯†"
        },
        "æ ‡é¢˜å’Œæ‘˜è¦": {
            "TI": "æ–‡çŒ®æ ‡é¢˜ - æ–‡ç« çš„æ ‡é¢˜",
            "AB": "æ‘˜è¦ - æ–‡ç« æ‘˜è¦",
            "MA": "ä¼šè®®æ‘˜è¦ - ä¼šè®®è®ºæ–‡æ‘˜è¦"
        },
        "æœŸåˆŠå’Œå‡ºç‰ˆç‰©ä¿¡æ¯": {
            "SO": "å‡ºç‰ˆç‰©åç§° - æœŸåˆŠæˆ–ä¹¦ç±åç§°",
            "J9": "æœŸåˆŠåç§°ç¼©å†™ - æœŸåˆŠçš„ç¼©å†™å½¢å¼",
            "JI": "ISOæœŸåˆŠåç§°ç¼©å†™ - å›½é™…æ ‡å‡†æœŸåˆŠåç§°ç¼©å†™",
            "SN": "ISSN - å›½é™…æ ‡å‡†æœŸåˆŠå·",
            "EI": "eISSN - ç”µå­ç‰ˆå›½é™…æ ‡å‡†æœŸåˆŠå·",
            "BN": "ISBN - å›½é™…æ ‡å‡†ä¹¦å·"
        },
        "å‡ºç‰ˆä¿¡æ¯": {
            "PY": "å‡ºç‰ˆå¹´ - æ–‡ç« å‘è¡¨å¹´ä»½",
            "PD": "å‡ºç‰ˆæ—¥æœŸ - å…·ä½“å‘è¡¨æ—¥æœŸ",
            "VL": "å· - æœŸåˆŠå·å·",
            "IS": "æœŸ - æœŸåˆŠæœŸå·",
            "BP": "å¼€å§‹é¡µ - æ–‡ç« èµ·å§‹é¡µç ",
            "EP": "ç»“æŸé¡µ - æ–‡ç« ç»“æŸé¡µç ",
            "PG": "é¡µæ•° - æ–‡ç« æ€»é¡µæ•°",
            "DI": "DOI - æ•°å­—å¯¹è±¡æ ‡è¯†ç¬¦",
            "D2": "ä¹¦ç±DOI - ä¹¦ç±çš„æ•°å­—å¯¹è±¡æ ‡è¯†ç¬¦"
        },
        "å‡ºç‰ˆå•†ä¿¡æ¯": {
            "PU": "å‡ºç‰ˆå•† - å‡ºç‰ˆæœºæ„åç§°",
            "PI": "å‡ºç‰ˆå•†æ‰€åœ¨åŸå¸‚ - å‡ºç‰ˆå•†æ‰€åœ¨åŸå¸‚",
            "PA": "å‡ºç‰ˆå•†åœ°å€ - å‡ºç‰ˆå•†è¯¦ç»†åœ°å€",
            "PN": "å­è¾‘ - æœŸåˆŠçš„å­è¾‘ä¿¡æ¯"
        },
        "å…³é”®è¯å’Œä¸»é¢˜": {
            "DE": "ä½œè€…å…³é”®è¯ - ä½œè€…æä¾›çš„å…³é”®è¯",
            "ID": "Keywords Plus - Web of Scienceè‡ªåŠ¨æå–çš„å…³é”®è¯",
            "WC": "Web of Scienceç±»åˆ« - æ–‡ç« æ‰€å±å­¦ç§‘ç±»åˆ«",
            "SC": "ç ”ç©¶æ–¹å‘ - æ–‡ç« çš„ç ”ç©¶é¢†åŸŸ"
        },
        "åœ°å€ä¿¡æ¯": {
            "C1": "ä½œè€…åœ°å€ - ä½œè€…æ‰€å±æœºæ„åœ°å€",
            "RP": "é€šè®¯ä½œè€…åœ°å€ - é€šè®¯ä½œè€…çš„è”ç³»åœ°å€",
            "EM": "ç”µå­é‚®ä»¶åœ°å€ - ä½œè€…é‚®ç®±åœ°å€"
        },
        "ä¼šè®®ä¿¡æ¯": {
            "CT": "ä¼šè®®æ ‡é¢˜ - ä¼šè®®åç§°",
            "CY": "ä¼šè®®æ—¥æœŸ - ä¼šè®®ä¸¾åŠæ—¥æœŸ",
            "CL": "ä¼šè®®åœ°ç‚¹ - ä¼šè®®ä¸¾åŠåœ°ç‚¹",
            "HO": "ä¼šè®®ä¸»åŠæ–¹ - ä¼šè®®ä¸»åŠæœºæ„",
            "SP": "ä¼šè®®èµåŠ©æ–¹ - ä¼šè®®èµåŠ©æœºæ„"
        },
        "å¼•ç”¨ä¿¡æ¯": {
            "CR": "å‚è€ƒæ–‡çŒ® - æ–‡ç« å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åˆ—è¡¨",
            "NR": "å‚è€ƒæ–‡çŒ®æ•° - å‚è€ƒæ–‡çŒ®çš„æ€»æ•°é‡",
            "TC": "è¢«å¼•é¢‘æ¬¡ - æ–‡ç« è¢«å¼•ç”¨çš„æ¬¡æ•°",
            "Z9": "è¢«å¼•é¢‘æ¬¡åˆè®¡ - æ€»è¢«å¼•é¢‘æ¬¡",
            "U1": "ä½¿ç”¨æ¬¡æ•°(æœ€è¿‘180å¤©) - æœ€è¿‘180å¤©çš„ä½¿ç”¨æ¬¡æ•°",
            "U2": "ä½¿ç”¨æ¬¡æ•°(2013å¹´è‡³ä»Š) - 2013å¹´è‡³ä»Šçš„ä½¿ç”¨æ¬¡æ•°"
        },
        "åŸºé‡‘ä¿¡æ¯": {
            "FU": "åŸºé‡‘èµ„åŠ©æœºæ„å’Œæˆæƒå· - èµ„åŠ©æœºæ„ä¿¡æ¯",
            "FX": "åŸºé‡‘èµ„åŠ©æ­£æ–‡ - èµ„åŠ©é¡¹ç›®çš„è¯¦ç»†æè¿°"
        },
        "å…¶ä»–ä¿¡æ¯": {
            "LA": "è¯­ç§ - æ–‡ç« ä½¿ç”¨çš„è¯­è¨€",
            "DT": "æ–‡çŒ®ç±»å‹ - æ–‡ç« çš„å…·ä½“ç±»å‹",
            "OA": "å…¬å¼€è®¿é—®æŒ‡ç¤ºç¬¦ - å¼€æ”¾è·å–çŠ¶æ€",
            "PM": "PubMed ID - PubMedæ•°æ®åº“æ ‡è¯†ç¬¦",
            "GA": "æ–‡çŒ®ä¼ é€’å· - æ–‡çŒ®ä¼ é€’æœåŠ¡ç¼–å·",
            "SE": "ä¸›ä¹¦æ ‡é¢˜ - ä¸›ä¹¦åç§°",
            "SI": "ç‰¹åˆŠ - ç‰¹åˆŠä¿¡æ¯",
            "DA": "ç”Ÿæˆæ­¤æŠ¥å‘Šçš„æ—¥æœŸ - æŠ¥å‘Šç”Ÿæˆæ—¥æœŸ",
            "EA": "æå‰è®¿é—®æ—¥æœŸ - æå‰åœ¨çº¿å‘è¡¨æ—¥æœŸ",
            "EY": "æå‰è®¿é—®å¹´ä»½ - æå‰åœ¨çº¿å‘è¡¨å¹´ä»½",
            "ES": "ESIçƒ­é—¨è®ºæ–‡ - é«˜è¢«å¼•è®ºæ–‡æ ‡è¯†",
            "ET": "ESIå¸¸è¢«å¼•ç”¨çš„è®ºæ–‡ - å¸¸è¢«å¼•è®ºæ–‡æ ‡è¯†",
            "WE": "æ•°æ®åº“ - æ•°æ®æ¥æºæ•°æ®åº“"
        }
    }
    
    # åˆ›å»ºä¾§è¾¹æ å¯¼èˆª
    st.sidebar.title("ğŸ“– å­—æ®µåˆ†ç±»")
    selected_category = st.sidebar.selectbox(
        "é€‰æ‹©å­—æ®µåˆ†ç±»",
        list(field_categories.keys())
    )
    
    # æ˜¾ç¤ºé€‰ä¸­çš„åˆ†ç±»
    st.subheader(f"ğŸ“‹ {selected_category}")
    
    # åˆ›å»ºå­—æ®µè¡¨æ ¼
    fields_data = []
    for field_code, description in field_categories[selected_category].items():
        fields_data.append({
            "å­—æ®µä»£ç ": field_code,
            "å­—æ®µåç§°": description.split(" - ")[0],
            "è¯¦ç»†è¯´æ˜": description.split(" - ")[1] if " - " in description else description
        })
    
    df = pd.DataFrame(fields_data)
    st.dataframe(df, use_container_width=True)
    
    # æ·»åŠ ä½¿ç”¨è¯´æ˜
    st.markdown("---")
    st.subheader("ğŸ’¡ ä½¿ç”¨è¯´æ˜")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("""
        **ğŸ” å­—æ®µæŸ¥æ‰¾æŠ€å·§ï¼š**
        - ä½¿ç”¨ä¾§è¾¹æ é€‰æ‹©å­—æ®µåˆ†ç±»
        - å­—æ®µä»£ç é€šå¸¸ä¸º2-3ä¸ªå­—æ¯
        - å­—æ®µåç§°é‡‡ç”¨ä¸­æ–‡æè¿°
        - è¯¦ç»†è¯´æ˜åŒ…å«å…·ä½“å«ä¹‰
        """)
    
    with col2:
        st.markdown("""
        **ğŸ“Š æ•°æ®è§£æè¯´æ˜ï¼š**
        - å¤šå€¼å­—æ®µç”¨åˆ†å·(;)åˆ†éš”
        - æ•°å€¼å­—æ®µè‡ªåŠ¨è½¬æ¢ä¸ºæ•°å­—ç±»å‹
        - æ—¥æœŸå­—æ®µè‡ªåŠ¨è§£æä¸ºæ—¥æœŸæ ¼å¼
        - ç©ºå€¼ç”¨NaNè¡¨ç¤º
        """)
    
    # æ·»åŠ å¸¸è§é—®é¢˜
    st.markdown("---")
    st.subheader("â“ å¸¸è§é—®é¢˜")
    
    with st.expander("ä¸ºä»€ä¹ˆæœ‰äº›å­—æ®µä¸ºç©ºï¼Ÿ"):
        st.markdown("""
        å­—æ®µä¸ºç©ºçš„åŸå› å¯èƒ½åŒ…æ‹¬ï¼š
        - åŸå§‹æ•°æ®ä¸­è¯¥å­—æ®µç¡®å®ä¸ºç©º
        - å­—æ®µåç§°ä¸åŒ¹é…å¯¼è‡´è§£æå¤±è´¥
        - æ•°æ®æ ¼å¼ä¸ç¬¦åˆWOSæ ‡å‡†
        - æ–‡ä»¶ç¼–ç é—®é¢˜å¯¼è‡´è§£æé”™è¯¯
        """)
    
    with st.expander("å¦‚ä½•å¤„ç†å¤šä½œè€…ä¿¡æ¯ï¼Ÿ"):
        st.markdown("""
        å¤šä½œè€…ä¿¡æ¯çš„å¤„ç†æ–¹å¼ï¼š
        - AUå­—æ®µï¼šç”¨åˆ†å·åˆ†éš”å¤šä¸ªä½œè€…
        - AFå­—æ®µï¼šç”¨åˆ†å·åˆ†éš”å¤šä¸ªä½œè€…å…¨å
        - C1å­—æ®µï¼šç”¨åˆ†å·åˆ†éš”å¤šä¸ªåœ°å€
        - å»ºè®®åœ¨åˆ†ææ—¶å…ˆåˆ†å‰²è¿™äº›å­—æ®µ
        """)
    
    with st.expander("å¼•ç”¨æ•°æ®å¦‚ä½•ç†è§£ï¼Ÿ"):
        st.markdown("""
        å¼•ç”¨ç›¸å…³å­—æ®µè¯´æ˜ï¼š
        - TCï¼šå½“å‰è¢«å¼•é¢‘æ¬¡
        - Z9ï¼šæ€»è¢«å¼•é¢‘æ¬¡
        - U1ï¼šæœ€è¿‘180å¤©ä½¿ç”¨æ¬¡æ•°
        - U2ï¼š2013å¹´è‡³ä»Šä½¿ç”¨æ¬¡æ•°
        - è¿™äº›æ•°æ®åæ˜ æ–‡ç« çš„å½±å“åŠ›
        """)

def get_field_examples() -> Dict[str, List[str]]:
    """è·å–å­—æ®µç¤ºä¾‹æ•°æ®"""
    return {
        "AU": ["Smith, J", "Johnson, A", "Brown, M"],
        "TI": ["Digital Twin Technology in Construction Industry"],
        "SO": ["Journal of Building Engineering"],
        "PY": ["2024"],
        "DE": ["digital twin", "construction", "building information modeling"],
        "TC": ["15"],
        "C1": ["[Smith, J] Univ Technol, Sydney, NSW, Australia", "[Johnson, A] MIT, Cambridge, MA USA"]
    }

def display_field_examples():
    """æ˜¾ç¤ºå­—æ®µç¤ºä¾‹"""
    st.subheader("ğŸ“ å­—æ®µç¤ºä¾‹")
    
    examples = get_field_examples()
    
    for field_code, example_values in examples.items():
        st.markdown(f"**{field_code} å­—æ®µç¤ºä¾‹ï¼š**")
        for value in example_values:
            st.code(value)
        st.markdown("---")
